'use client'

import { useState } from 'react'
import styles from '../styles/App.module.css'
export default function AddUser({onAdd}){

    const [username,setUsername]= useState('')
    const [email,setEmail]= useState('')
    const [city,setCity]= useState('')
const handleSubmit=(e)=>{
    e.preventDefault()
    if(!username.trim() || !email.trim() || !city.trim()) return alert('All Fields are required')
        onAdd({username:username.trim(),email:email.trim(),city:city.trim()})
}


    return (
        <form className={styles.form} onSubmit={handleSubmit}>
            <input placeholder='Enter Username' value={username} onChange={(e)=> setUsername(e.target.value)} className={styles.input}></input>
              <input placeholder='Enter Email' value={email} onChange={(e)=> setEmail(e.target.value)} className={styles.input}></input>
                <input placeholder='Enter City' value={city} onChange={(e)=> setCity(e.target.value)} className={styles.input}></input>
                <div className={styles.controls}>
        <button className={styles.button}>Add</button>
             <button type='button' className={styles.button}>Reset</button>
             </div>
        </form>
    )
}
----


"use client";

import { useEffect, useState } from "react";

export function useUsers() {
  const [users, setUsers] = useState([]);

  useEffect(() => {
    //setUsers
  });

  const addUser = (user) => {
    setUsers((prev) => [...prev, { ...user, id: Date.now().toString() }]);
    console.log(...users);
    
  };
  return { users, addUser };
}


---------

export const STORAGE_KEY = "capg_users";

export const writeToStorage = (users) => {
  try {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(users));
  } catch (e) {
    console.error("Write to Storage error ", e);
  }
};


--------

"use client";
import AddUser from "./AddUser";
import Footer from "./Footer";
import Header from "./Header";
import styles from "../styles/App.module.css";
import { useUsers } from "../hooks/useUsers";

function MainApp() {
  const {addUser} = useUsers()
  const Header_Message = " NextJS User CRUD App";
  const FOOTER_Message = " User CopyRight Mesage";
  return (
    <div>
      <Header hm={Header_Message} />
      <main className={styles.container}>
        <div className={styles.grid}>
          <div className={styles.card}>
            <AddUser onAdd={addUser} />
          </div>
        </div>
        <hr/>
        <br/>
        <Footer fm={FOOTER_Message} />
      </main>
    </div>
  );
}
export default MainApp;
